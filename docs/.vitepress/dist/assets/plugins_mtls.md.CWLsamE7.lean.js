import{_ as e,c as i,a2 as a,o as s}from"./chunks/framework.B1nutZSU.js";const d=JSON.parse('{"title":"Mutual TLS (mTLS) Plugin","description":"","frontmatter":{},"headers":[],"relativePath":"plugins/mtls.md","filePath":"plugins/mtls.md"}'),n={name:"plugins/mtls.md"};function o(l,t,r,c,h,u){return s(),i("div",null,t[0]||(t[0]=[a(`<h1 id="mutual-tls-mtls-plugin" tabindex="-1">Mutual TLS (mTLS) Plugin <a class="header-anchor" href="#mutual-tls-mtls-plugin" aria-label="Permalink to &quot;Mutual TLS (mTLS) Plugin&quot;">​</a></h1><p>The Mutual TLS (mTLS) (<code>mtls</code>) plugin ensures secure communication by requiring both the client and server to authenticate each other during the TLS handshake. This plugin adds an additional layer of security by verifying client certificates against a trusted Certificate Authority (CA).</p><h2 id="how-it-works" tabindex="-1">How It Works <a class="header-anchor" href="#how-it-works" aria-label="Permalink to &quot;How It Works&quot;">​</a></h2><p>The mTLS plugin enforces a two-way TLS handshake:</p><ol><li>The client presents a valid certificate to the server.</li><li>Sushi Gateway validates the client certificate against the configured CA certificate.</li><li>If validation succeeds, the connection is established; otherwise, it is rejected.</li></ol><p>This mechanism ensures that only authorized clients can connect to the API.</p><h3 id="key-features" tabindex="-1">Key Features <a class="header-anchor" href="#key-features" aria-label="Permalink to &quot;Key Features&quot;">​</a></h3><ul><li>Verifies client certificates for secure communication.</li><li>Enforces mTLS requirements at the gateway level.</li><li>Uses a configurable CA certificate for validation.</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Learn how to integrate this plugin into your setup in the <strong><a href="./../plugins/">Plugins Overview</a></strong>.</p></div><h2 id="configuration-requirements" tabindex="-1">Configuration Requirements <a class="header-anchor" href="#configuration-requirements" aria-label="Permalink to &quot;Configuration Requirements&quot;">​</a></h2><p>The mTLS plugin relies on the following environment variable:</p><table tabindex="0"><thead><tr><th>Environment Variable</th><th>Description</th><th>Example Value</th></tr></thead><tbody><tr><td><code>CA_CERT_PATH</code></td><td>Path to the Certificate Authority (CA) file for validating client certificates.</td><td><code>/path/to/ca.crt</code></td></tr></tbody></table><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Ensure that the CA certificate file provided in <code>CA_CERT_PATH</code> is valid and accessible by Sushi Gateway. For more information, refer to the <strong><a href="./../concepts/configuration/environment.html">Environment Variables Configuration</a></strong>.</p></div><h2 id="example-configuration" tabindex="-1">Example Configuration <a class="header-anchor" href="#example-configuration" aria-label="Permalink to &quot;Example Configuration&quot;">​</a></h2><p>Below is an example of enabling the mTLS plugin:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mtls&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;enabled&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;config&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="explanation" tabindex="-1">Explanation <a class="header-anchor" href="#explanation" aria-label="Permalink to &quot;Explanation&quot;">​</a></h3><ul><li><strong><code>enabled</code></strong>: Activates the plugin to enforce mTLS.</li><li><strong><code>config</code></strong>: Currently, no additional configuration fields are required.</li></ul><h2 id="steps-to-configure-mtls" tabindex="-1">Steps to Configure mTLS <a class="header-anchor" href="#steps-to-configure-mtls" aria-label="Permalink to &quot;Steps to Configure mTLS&quot;">​</a></h2><ol><li><p><strong>Prepare a CA Certificate</strong>: Generate or obtain a valid CA certificate used to issue client certificates.</p></li><li><p><strong>Set the Environment Variable</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CA_CERT_PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/path/to/ca.crt</span></span></code></pre></div></li><li><p><strong>Apply the Plugin</strong>: Enable the mTLS plugin in your configuration as shown above.</p></li><li><p><strong>Distribute Client Certificates</strong>: Provide authorized clients with certificates signed by the trusted CA.</p></li><li><p><strong>Test the Handshake</strong>: Verify that only clients with valid certificates can connect to Sushi Gateway.</p></li></ol><h2 id="important-note" tabindex="-1">Important Note <a class="header-anchor" href="#important-note" aria-label="Permalink to &quot;Important Note&quot;">​</a></h2><p>The mTLS plugin requires requests to be sent over HTTPS to Sushi Gateway&#39;s <strong>secure endpoint (port 8443)</strong>. Any requests made to the HTTP endpoint will fail because mTLS requires a secure TLS handshake.</p><h2 id="use-cases" tabindex="-1">Use Cases <a class="header-anchor" href="#use-cases" aria-label="Permalink to &quot;Use Cases&quot;">​</a></h2><ol><li><strong>Secure Communication</strong>: Ensure end-to-end encryption and mutual authentication between clients and the gateway.</li><li><strong>Restrict Unauthorized Access</strong>: Allow only clients with trusted certificates to connect.</li><li><strong>Compliance Requirements</strong>: Meet industry standards and regulations for secure communication.</li></ol><h2 id="tips-for-using-the-mtls-plugin" tabindex="-1">Tips for Using the mTLS Plugin <a class="header-anchor" href="#tips-for-using-the-mtls-plugin" aria-label="Permalink to &quot;Tips for Using the mTLS Plugin&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Use strong and unique client certificates to prevent unauthorized access.</p></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Regularly update and rotate CA certificates to maintain a secure environment.</p></div><p>For more plugins, visit the <strong><a href="./../plugins/">Plugins Overview</a></strong>.</p>`,28)]))}const g=e(n,[["render",o]]);export{d as __pageData,g as default};
